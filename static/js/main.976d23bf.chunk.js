(this["webpackJsonpgithub-react-client"]=this["webpackJsonpgithub-react-client"]||[]).push([[0],{155:function(e,t){},161:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n(20),i=n.n(c),s=(n(97),n(98),n(54)),o=n(16),l=n(13),u=n(21),j=n(33),d=n(177),b=n(181),f=n(182),h=n(183),O=n(184),m=n(87),x=n(174),p=n(15),v=n(83),y=function(e){for(var t=[],n=0;n<e.length;n++){var a=e[n],r=a.type,c=a.repo,i=c.id,s=c.name;if("PushEvent"!==r)break;t.push({id:i,name:s})}return t},g=function(e){return Object(v.a)(e,(function(e){return e.name}))},w=function(e){return Object.entries(e).map((function(e){var t=Object(u.a)(e,2);return{name:t[0],count:t[1]}}))},k=function(e){return e.sort((function(e,t){return e.count>t.count?-1:1}))},I=Object(p.compose)(Object(p.withMemo)("topReposCount",(function(e){var t=e.data;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}(y,g,w,k)(t)}),["data"]))((function(e){var t=e.topReposCount;return Object(a.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(a.jsx)(j.a,{pad:"medium",style:{maxWidth:"800px"},children:Object(a.jsx)(x.a,{primaryKey:"count",secondaryKey:"name",data:t})})})})),_=n(27),D=n.n(_),E=n(50),S=n.n(E),C=n(85),M=D.a.create({baseURL:"https://api.github.com"});S()(M,{retryDelay:S.a.exponentialDelay,retries:5});Object(C.a)({axios:M});var R=M,W=n(178),F=n(176),L=n(82);F.a.addDefaultLocale(L);var P=function(e){return function(e){return({CreateEvent:function(e){var t=e.payload,n=t.ref_type,r=t.ref,c=e.repo.name,i=e.created_at;return Object(a.jsxs)(m.a,{children:["created ",n," ",r," at ",c," ",Object(a.jsx)(W.a,{date:new Date(i)})]})},DeleteEvent:function(e){var t=e.payload,n=t.ref_type,r=t.ref,c=e.repo.name,i=e.created_at;return Object(a.jsxs)(m.a,{children:["deleted ",n," ",r," at ",c," ",Object(a.jsx)(W.a,{date:new Date(i)})]})},PullRequestEvent:function(e){var t=e.payload,n=t.action,r=t.pull_request,c=r.html_url,i=r.title,s=e.created_at;return Object(a.jsxs)(m.a,{children:[n," pull request: ",Object(a.jsx)("a",{href:c,children:i})," ",Object(a.jsx)(W.a,{date:new Date(s)})]})},PushEvent:function(e){var t=e.payload.ref,n=void 0===t?"":t,r=e.repo.name,c=e.created_at;return Object(a.jsxs)(m.a,{children:["pushed to"," ",n.includes("refs/heads/")&&n.split("/").slice(2).join("/")," ",r," ",Object(a.jsx)(W.a,{date:new Date(c)})]})}}[e.type]||function(){return null})(e)}(e.event)},K=n(37),q=Object(p.compose)(Object(p.withMemo)("db",(function(){return new K.a("read-later")}),[]))((function(e){var t=e.data,n=void 0===t?[]:t,r=e.db;return Object(a.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(a.jsx)(j.a,{pad:"medium",style:{maxWidth:"1000px"},children:Object(a.jsx)(x.a,{primaryKey:"type",data:n,action:function(e){return Object(a.jsx)(P,{event:e})},onClickItem:function(e){var t=e.item;r.put(Object(l.a)(Object(l.a)({},t),{},{_id:t.id}))}})})})})),N=n(84),B=Object(p.compose)(Object(p.withMemo)("db",(function(){return new K.a("read-later")}),[]),Object(p.withState)("likedItems","setLikedItems",void 0),Object(p.withState)("refreshFlag","setRefreshFlag",!1),Object(p.withEffect)((function(e){var t=e.db,n=e.setLikedItems;t&&t.allDocs({include_docs:!0}).then((function(e){console.log(e),n(e.rows.map((function(e){return e.doc})))}))}),["db","refreshFlag"]))((function(e){var t=e.likedItems,n=void 0===t?[]:t,r=e.db,c=e.refreshFlag,i=e.setRefreshFlag;return Object(a.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(a.jsx)(j.a,{pad:"medium",style:{maxWidth:"1000px"},children:n&&n.length?Object(a.jsx)(x.a,{primaryKey:"type",data:n,action:function(e){return Object(a.jsx)(P,{event:e})},onClickItem:function(e){var t=e.item;r.remove(t),i(!c)}}):Object(a.jsx)(m.a,{children:"Go like some items :)"})})})})),J=function(e){var t=e.type,n=e.resource,c=Object(r.useState)([]),i=Object(u.a)(c,2),s=i[0],x=i[1],p=Object(r.useState)(""),v=Object(u.a)(p,2),y=v[0],g=v[1],w=Object(r.useState)(!0),k=Object(u.a)(w,2),_=k[0],D=k[1],E=Object(r.useState)(null),S=Object(u.a)(E,2),C=S[0],M=S[1],W=Object(r.useState)(""),F=Object(u.a)(W,2),L=F[0],P=F[1],K=Object(r.useMemo)((function(){return s.length?new N.a(s,{keys:["type","repo.name"]}):{search:function(){return[]}}}),[s]),J=Object(r.useMemo)((function(){return L?K.search(L).map((function(e){return e.item})):s}),[s,K,L]),z=function e(){C&&clearInterval(C);var a={url:"/"+t+"s/"+n+"/events"};y&&(a=Object(l.a)(Object(l.a)({},a),{},{headers:{"If-None-Match":y}})),R(a).then((function(t){var n=t.data,a=t.headers,r=a.etag,c=a["x-poll-interval"],i=void 0===c?60:c;x([].concat(Object(o.a)(n),Object(o.a)(s))),g(r),M(setInterval((function(){return e()}),1e3*i)),D(!1)})).catch((function(e){if(e.response)switch(e.response.status){case 304:console.log("Not modified!");break;default:clearInterval(C),alert("Please refresh the page")}else clearInterval(C),alert("Please refresh the page")}))};return Object(r.useEffect)((function(){C&&clearInterval(C),z()}),[t,n]),Object(a.jsxs)(j.a,{pad:"medium",basis:"medium",children:[Object(a.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(a.jsx)(j.a,{pad:"medium",children:Object(a.jsx)(d.a,{placeholder:"search",value:L,onChange:function(e){var t=e.target.value;return P(t)}})})}),s.length&&!_?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(j.a,{direction:"row",justify:"center",alignItems:"center",flex:!0,children:[Object(a.jsx)(b.a,{size:"large",margin:"small",src:s[0].actor.avatar_url}),Object(a.jsx)(f.a,{margin:"small",children:s[0].actor.display_login})]}),Object(a.jsxs)(h.a,{children:[Object(a.jsx)(O.a,{title:"Top Repos",children:Object(a.jsx)(I,{data:J})}),Object(a.jsx)(O.a,{title:"Details",children:Object(a.jsx)(q,{data:J})}),Object(a.jsx)(O.a,{title:"Likes",children:Object(a.jsx)(B,{})})]})]}):Object(a.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(a.jsx)(j.a,{pad:"medium",style:{maxWidth:"800px"},children:Object(a.jsx)(m.a,{children:"No content (yet)"})})})]})},z=n(179);var A=function(){var e=function(){return Object(a.jsx)(s.a,{to:"/user/erasmuswill"})};return Object(a.jsxs)(z.a,{children:[Object(a.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(a.jsx)(j.a,{pad:"medium",style:{maxWidth:"800px"},children:Object(a.jsx)(m.a,{children:"Click items to save and unsave for later"})})}),Object(a.jsxs)(s.b,{children:[Object(a.jsx)(J,{path:"/:type/:resource/"}),Object(a.jsx)(e,{default:!0})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(a.jsx)(r.StrictMode,{children:Object(a.jsx)(A,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},97:function(e,t,n){},98:function(e,t,n){}},[[161,1,2]]]);
//# sourceMappingURL=main.976d23bf.chunk.js.map