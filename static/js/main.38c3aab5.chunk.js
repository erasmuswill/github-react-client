(this["webpackJsonpgithub-react-client"]=this["webpackJsonpgithub-react-client"]||[]).push([[0],{152:function(e,t){},158:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),r=a(19),i=a.n(r),s=(a(95),a(96),a(52)),o=a(11),l=a(13),u=a(20),j=a(32),d=a(174),b=a(178),f=a(179),h=a(180),O=a(181),m=a(85),p=a(171),x=a(14),v=a(81),y=Object(x.compose)(Object(x.withMemo)("processedData",(function(e){var t=e.data.filter((function(e){return"PushEvent"===e.type})).map((function(e){var t=e.repo;return{id:t.id,name:t.name}})),a=Object(v.a)(t,(function(e){return e.name}));return Object.entries(a).map((function(e){var t=Object(u.a)(e,2);return{name:t[0],count:t[1]}})).sort((function(e,t){return e.count>t.count?-1:t.count>e.count?1:0}))}),["data"]))((function(e){var t=e.processedData;return Object(n.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(n.jsx)(j.a,{pad:"medium",style:{maxWidth:"800px"},children:Object(n.jsx)(p.a,{primaryKey:"count",secondaryKey:"name",data:t})})})})),g=a(26),w=a.n(g),D=a(49),_=a.n(D),k=a(83),I=w.a.create({baseURL:"https://api.github.com"});_()(I,{retryDelay:_.a.exponentialDelay,retries:5});Object(k.a)({axios:I});var E=I,M=a(175),S=a(173),P=a(80);S.a.addDefaultLocale(P);var W=function(e){return function(e){return({CreateEvent:function(e){var t=e.payload,a=t.ref_type,c=t.ref,r=e.repo.name,i=e.created_at;return Object(n.jsxs)(m.a,{children:["created ",a," ",c," at ",r," ",Object(n.jsx)(M.a,{date:new Date(i)})]})},DeleteEvent:function(e){var t=e.payload,a=t.ref_type,c=t.ref,r=e.repo.name,i=e.created_at;return Object(n.jsxs)(m.a,{children:["deleted ",a," ",c," at ",r," ",Object(n.jsx)(M.a,{date:new Date(i)})]})},PullRequestEvent:function(e){var t=e.payload,a=t.action,c=t.pull_request,r=c.html_url,i=c.title,s=e.created_at;return Object(n.jsxs)(m.a,{children:[a," pull request: ",Object(n.jsx)("a",{href:r,children:i})," ",Object(n.jsx)(M.a,{date:new Date(s)})]})},PushEvent:function(e){var t=e.payload.ref,a=void 0===t?"":t,c=e.repo.name,r=e.created_at;return Object(n.jsxs)(m.a,{children:["pushed to"," ",a.includes("refs/heads/")&&a.split("/").slice(2).join("/")," ",c," ",Object(n.jsx)(M.a,{date:new Date(r)})]})}}[e.type]||function(){return null})(e)}(e.event)},C=a(35),R=Object(x.compose)(Object(x.withMemo)("processedData",(function(e){var t=e.data;return Object(o.a)(t)}),["data"]),Object(x.withMemo)("db",(function(){return new C.a("read-later")}),[]))((function(e){var t=e.processedData,a=void 0===t?[]:t,c=e.db;return Object(n.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(n.jsx)(j.a,{pad:"medium",style:{maxWidth:"1000px"},children:Object(n.jsx)(p.a,{primaryKey:"type",data:a,action:function(e){return Object(n.jsx)(W,{event:e})},onClickItem:function(e){var t=e.item;c.put(Object(l.a)(Object(l.a)({},t),{},{_id:t.id}))}})})})})),F=a(82),K=Object(x.compose)(Object(x.withMemo)("db",(function(){return new C.a("read-later")}),[]),Object(x.withState)("processedData","setProcessedData",void 0),Object(x.withState)("refreshFlag","startRefresh",!1),Object(x.withEffect)((function(e){var t=e.db,a=e.setProcessedData;t&&t.allDocs({include_docs:!0}).then((function(e){console.log(e),a(e.rows.map((function(e){return e.doc})))}))}),["db","refreshFlag"]))((function(e){var t=e.processedData,a=void 0===t?[]:t,c=(e.setProcessedData,e.db),r=e.refreshFlag,i=e.startRefresh;return Object(n.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(n.jsx)(j.a,{pad:"medium",style:{maxWidth:"1000px"},children:a&&a.length?Object(n.jsx)(p.a,{primaryKey:"type",data:a,action:function(e){return Object(n.jsx)(W,{event:e})},onClickItem:function(e){var t=e.item;c.remove(t),i(!r)}}):Object(n.jsx)(m.a,{children:"Go like some items :)"})})})})),q=function(e){var t=e.type,a=e.resource,r=Object(c.useState)([]),i=Object(u.a)(r,2),s=i[0],p=i[1],x=Object(c.useState)(""),v=Object(u.a)(x,2),g=v[0],w=v[1],D=Object(c.useState)(!0),_=Object(u.a)(D,2),k=_[0],I=_[1],M=Object(c.useState)(null),S=Object(u.a)(M,2),P=S[0],W=S[1],C=Object(c.useState)(""),q=Object(u.a)(C,2),L=q[0],N=q[1],B=Object(c.useMemo)((function(){return s.length?new F.a(s,{keys:["id","type","repo.name"]}):{search:function(){return[]}}}),[s]),J=Object(c.useMemo)((function(){return L?B.search(L).map((function(e){return e.item})):s}),[s,B,L]),z=function e(){P&&clearInterval(P);var n={url:"/"+t+"s/"+a+"/events"};g&&(n=Object(l.a)(Object(l.a)({},n),{},{headers:{"If-None-Match":g}})),E(n).then((function(t){var a=t.data,n=t.headers,c=n.etag,r=n["x-poll-interval"],i=void 0===r?60:r;console.log({newData:a,poll:i,etag:c}),p([].concat(Object(o.a)(a),Object(o.a)(s))),w(c),W(setInterval((function(){return e()}),1e3*i)),I(!1)})).catch((function(e){e.response&&304===e.response.status?console.log("Not modified!"):(clearInterval(P),alert("Please refresh the page"))}))};return Object(c.useEffect)((function(){P&&clearInterval(P),z()}),[t,a]),Object(n.jsxs)(j.a,{pad:"medium",basis:"medium",children:[Object(n.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(n.jsx)(j.a,{pad:"medium",children:Object(n.jsx)(d.a,{placeholder:"search",value:L,onChange:function(e){var t=e.target.value;return N(t)}})})}),s.length&&!k?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(j.a,{direction:"row",justify:"center",alignItems:"center",flex:!0,children:[Object(n.jsx)(b.a,{size:"large",margin:"small",src:s[0].actor.avatar_url}),Object(n.jsx)(f.a,{margin:"small",children:s[0].actor.display_login})]}),Object(n.jsxs)(h.a,{children:[Object(n.jsx)(O.a,{title:"Top Repos",children:Object(n.jsx)(y,{data:J})}),Object(n.jsx)(O.a,{title:"Details",children:Object(n.jsx)(R,{data:J})}),Object(n.jsx)(O.a,{title:"Likes",children:Object(n.jsx)(K,{})})]})]}):Object(n.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(n.jsx)(j.a,{pad:"medium",style:{maxWidth:"800px"},children:Object(n.jsx)(m.a,{children:"No content (yet)"})})})]})},L=a(176);var N=function(){var e=function(){return Object(n.jsx)(s.a,{to:"/github-react-client/user/erasmuswill"})};return Object(n.jsxs)(L.a,{children:[Object(n.jsx)(j.a,{fill:!0,flex:!0,justify:"center",align:"center",children:Object(n.jsx)(j.a,{pad:"medium",style:{maxWidth:"800px"},children:Object(n.jsx)(m.a,{children:"Click items to save and unsave for later"})})}),Object(n.jsxs)(s.b,{basepath:"/github-react-client",children:[Object(n.jsx)(q,{path:"/:type/:resource/"}),Object(n.jsx)(e,{default:!0})]})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(n.jsx)(c.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){},96:function(e,t,a){}},[[158,1,2]]]);
//# sourceMappingURL=main.38c3aab5.chunk.js.map